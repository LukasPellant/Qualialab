1 Nový klíčový systém : Populace
Prvek	Funkce	Výchozí hodnota
Population Cap	Max. počet obyvatel – součet kapacit všech Houses + Town Hall.	10
Idle Villagers	Volní lidé ve frontě; mohou být najati coby Worker nebo Soldier.	5 (start)
Growth	Recruit v Town Hall: +1 Villager ⇒ −20 food, −5 gold, trvá 30 s.	—

V kódu: usePopulationStore { idle, cap }; ResourceSystem při každém ticku kontroluje možné rekrutování/limity.

2 Budovy – tabulka
Tier	Budova	Účel	Build Cost (wood/stone/food/gold)	Build Time	Kapacita / Bonus
0 (start)	Town Hall	centrální sklad, rekrut Villagers, respawn hráče	0 / 0 / 0 / 0	—	cap +10, storage 500 každá surovina
1	House	zvyšuje populace cap	25 / 10 / 0 / 0	20 s	cap +5
1	Farm (už máme)	+2 food/tick	20 / 0 / 0 / 0	25 s	—
1	Lumber Camp	zkracuje „gather wood“ čas o 30 %	30 / 5 / 0 / 0	30 s	storage +200 wood
2	Stone Quarry	+1 stone/tick (musí stát u Mountain)	20 / 20 / 0 / 0	40 s	—
2	Watchtower	odhalí mlhu 12 ⨉ 12 polí, střílí na bandity (později)	40 / 15 / 0 / 5	45 s	HP 300
3	Barracks	trénuje Soldiers z Villagers (+1 stone, +10 gold, 40 s)	60 / 40 / 20 / 20	60 s	fronta 2

(„Tier“ = minimální celkový počet postavených budov; slouží jako jednoduchý tech-gating.)

3 Začátek hry
Mapa spawnuje Town Hall, 2 House, 1 Farm, 1 Forest, 1 Mountain.

Resources start: wood = 100, stone = 50, food = 120, gold = 50.

Idle Villagers = 5, cap = 20 → 5 slotů volných.

4 Toky práce
Recruit → Worker

Hráč klikne na idle villager v UI (nebo hotkey W).

Worker vytvořen (odebere 1 idle).

Gather (dřevo / kámen)

Pokud u suroviny postaven specializovaný camp/quarry → zrychlený workDuration = base * 0.7.

Build request

BuildMenu předá Task(type:"build", blueprint:"House") do TaskSystem.

Deduct resources okamžitě; pokud chybí → toast „Not enough …“.

Soldier training (až Tier 3)

Barracks queue slot → −1 idle villager, −1 stone, −10 gold, −20 food.

Po 40 s nový soldier entita.

5 Úpravy subsystémů
Systém	Změna
usePopulationStore	{ idle: number, cap: number } + selector canRecruit.
ResourceSystem	Funkce autoRecruit() – pokud food ≥ 40 && gold ≥ 10 && idle < cap, zahájí recruit tick job.
TaskSystem	Nový task type "train" (Barracks).
UI	HUDBar: přidat idle/cap ikonku 👥 5 / 20.
WorkerTable: sloupec „Unassign“ (vrací worker do idle).
PathSystem	House, Barracks, Tower přidávají blok do gridu.
Save/Load	Snapshot nových polí (population, building.progress).

6 Balancing směrem k playable loop
Dřevěná ekonomika: 1 Worker + Forest → +1 wood / 4 s ⇒ Farm & House ufinancovatelné za ~3 min.

Recruit náklad (20 food + 5 gold) vynutí postavit Farm(y) než se spamují Workerzy.

Tier 2 vyžaduje 6 budov celkem → hráč musí rozšířit základnu a řešit space/path.

7 Future hooks
Population Happiness (spotřeba food/wood per tick; nízké = rebelie).

Shared pool pro Soldiers – jedním klikem lze „conscription“; Worker ⟷ Soldier beze ztrát.

Event-driven growth: při stavbě každé House šance 10 % že přibude “free villager” (rodí se děti).